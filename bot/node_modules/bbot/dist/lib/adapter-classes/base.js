"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Adapter {
    constructor(bot) {
        this.bot = bot;
        this.name = 'base-adapter';
    }
    parseSchema(internal, schema, external = {}) {
        const converted = {};
        const target = (external.constructor.name !== 'Object')
            ? Object.create(external)
            : this.bot.deepClone(external);
        for (let key in schema) {
            const valueAtPath = schema[key].split('.').reduce((pre, cur) => {
                return (typeof pre !== 'undefined') ? pre[cur] : undefined;
            }, internal);
            if (typeof valueAtPath !== 'undefined') {
                converted[key] = valueAtPath;
                delete target[schema[key]];
            }
        }
        return Object.assign(target, converted);
    }
}
exports.Adapter = Adapter;
